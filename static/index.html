<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <title>Sondez les Ecritures</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Crimson+Text:wght@400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/static/styles.css">
  <script src="https://unpkg.com/htmx.org@2.0.4"></script>
  <script src="https://unpkg.com/embla-carousel@8.0.0/embla-carousel.umd.js"></script>
</head>
<body>

  <div class="offline-banner hidden" role="status" aria-live="polite">
    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
         stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
      <line x1="1" y1="1" x2="23" y2="23"/><path d="M16.72 11.06A10.94 10.94 0 0 1 19 12.55"/><path d="M5 12.55a10.94 10.94 0 0 1 5.17-2.39"/><path d="M10.71 5.05A16 16 0 0 1 22.56 9"/><path d="M1.42 9a15.91 15.91 0 0 1 4.7-2.88"/><path d="M8.53 16.11a6 6 0 0 1 6.95 0"/><line x1="12" y1="20" x2="12.01" y2="20"/>
    </svg>
    Hors connexion - navigation en cache
  </div>

  <button type="button" class="sidebar-toggle" aria-label="Ouvrir l'historique" aria-expanded="false" aria-controls="history-sidebar">
    <svg class="sidebar-toggle-open" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
         stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
      <line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="18" x2="21" y2="18"/>
    </svg>
    <svg class="sidebar-toggle-close hidden" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
         stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
      <polyline points="15 18 9 12 15 6"/>
    </svg>
  </button>
  <div class="sidebar-backdrop hidden"></div>
  <aside id="history-sidebar" class="history-sidebar" role="complementary" aria-label="Historique des recherches">
    <div class="history-list"></div>
    <p class="history-empty">Vos recherches apparaitront ici</p>
  </aside>

  <header class="page-header" aria-label="Sondez les Ecritures - Recherche semantique">
    <h1>Sondez les Ecritures</h1>
    <p class="subtitle">Recherche semantique dans la Bible</p>
    <p class="description">Posez une question sur la Bible et trouvez les versets les plus pertinents.</p>
  </header>

  <main>
    <form id="search-form" class="search-bar" role="search"
          hx-post="/search" hx-target="#results-container" hx-indicator="#results-container">
      <input
        type="search"
        name="query"
        id="query-input"
        class="search-input"
        placeholder="Recherchez dans la Bible..."
        aria-label="Rechercher dans la Bible"
        aria-describedby="word-count-hint"
        autocomplete="off"
        maxlength="300"
        required
        autofocus
      >
      <button type="button" class="clear-button hidden" aria-label="Effacer">&times;</button>
      <button type="submit" class="search-button" aria-label="Rechercher" aria-disabled="true">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
             stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
          <circle cx="11" cy="11" r="8"/>
          <line x1="21" y1="21" x2="16.65" y2="16.65"/>
        </svg>
      </button>
    </form>
    <div id="word-count-hint" class="word-count-hint hidden" aria-live="polite"></div>

    <div id="results-container">
      <div class="indicator" role="status" aria-live="polite"><span class="loading-text">Recherche en cours...</span></div>
      <div id="results-content"></div>
    </div>
  </main>

  <div hx-get="/health" hx-trigger="load" hx-swap="none" style="display:none;"></div>

  <script src="/static/app.js" defer></script>
</body>
</html>
